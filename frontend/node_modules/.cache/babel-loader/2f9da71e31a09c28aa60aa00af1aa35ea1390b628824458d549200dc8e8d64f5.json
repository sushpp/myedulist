{"ast":null,"code":"import React,{useState,useEffect}from'react';import{reviewService}from'../../services/review';import{instituteService}from'../../services/institute';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reviews=()=>{const[reviews,setReviews]=useState([]);const[institute,setInstitute]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchInstituteAndReviews();},[]);const fetchInstituteAndReviews=async()=>{try{// Get institute profile first to get the institute ID\nconst instituteData=await instituteService.getInstituteProfile();setInstitute(instituteData);// Then fetch reviews for this institute\nif(instituteData&&instituteData._id){const reviewsData=await reviewService.getInstituteReviews(instituteData._id);setReviews(reviewsData);}}catch(error){console.error('Error fetching reviews:',error);}finally{setLoading(false);}};const getRatingStars=rating=>{return'⭐'.repeat(rating)+'☆'.repeat(5-rating);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading reviews...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Student Reviews\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View and manage reviews from students and parents\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Average Rating\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"average-rating\",children:reviews.length>0?(reviews.reduce((acc,review)=>acc+review.rating,0)/reviews.length).toFixed(1):'0.0'}),/*#__PURE__*/_jsx(\"div\",{className:\"stars\",children:reviews.length>0?getRatingStars(Math.round(reviews.reduce((acc,review)=>acc+review.rating,0)/reviews.length)):'☆☆☆☆☆'}),/*#__PURE__*/_jsxs(\"span\",{className:\"review-count\",children:[\"(\",reviews.length,\" reviews)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Rating Distribution\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rating-bars\",children:[5,4,3,2,1].map(stars=>{const count=reviews.filter(review=>review.rating===stars).length;const percentage=reviews.length>0?count/reviews.length*100:0;return/*#__PURE__*/_jsxs(\"div\",{className:\"rating-bar\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stars\",children:'⭐'.repeat(stars)}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bar-fill\",style:{width:\"\".concat(percentage,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"count\",children:[\"(\",count,\")\"]})]},stars);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"All Reviews\"}),reviews.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No reviews received yet\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"reviews-grid\",children:reviews.map(review=>{var _review$user,_review$user$name,_review$user2;return/*#__PURE__*/_jsxs(\"div\",{className:\"review-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"reviewer-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reviewer-avatar\",children:((_review$user=review.user)===null||_review$user===void 0?void 0:(_review$user$name=_review$user.name)===null||_review$user$name===void 0?void 0:_review$user$name.charAt(0).toUpperCase())||'U'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:((_review$user2=review.user)===null||_review$user2===void 0?void 0:_review$user2.name)||'Anonymous'}),/*#__PURE__*/_jsx(\"div\",{className:\"review-rating\",children:getRatingStars(review.rating)})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"review-date\",children:new Date(review.createdAt).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"review-text\",children:review.reviewText})]},review._id);})})]})]});};export default Reviews;","map":{"version":3,"names":["React","useState","useEffect","reviewService","instituteService","jsx","_jsx","jsxs","_jsxs","Reviews","reviews","setReviews","institute","setInstitute","loading","setLoading","fetchInstituteAndReviews","instituteData","getInstituteProfile","_id","reviewsData","getInstituteReviews","error","console","getRatingStars","rating","repeat","className","children","length","reduce","acc","review","toFixed","Math","round","map","stars","count","filter","percentage","style","width","concat","_review$user","_review$user$name","_review$user2","user","name","charAt","toUpperCase","Date","createdAt","toLocaleDateString","reviewText"],"sources":["C:/Users/HP-PC/Desktop/edulist/frontend/src/components/InstituteDashboard/Reviews.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { reviewService } from '../../services/review';\r\nimport { instituteService } from '../../services/institute';\r\n\r\nconst Reviews = () => {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [institute, setInstitute] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchInstituteAndReviews();\r\n  }, []);\r\n\r\n  const fetchInstituteAndReviews = async () => {\r\n    try {\r\n      // Get institute profile first to get the institute ID\r\n      const instituteData = await instituteService.getInstituteProfile();\r\n      setInstitute(instituteData);\r\n      \r\n      // Then fetch reviews for this institute\r\n      if (instituteData && instituteData._id) {\r\n        const reviewsData = await reviewService.getInstituteReviews(instituteData._id);\r\n        setReviews(reviewsData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching reviews:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getRatingStars = (rating) => {\r\n    return '⭐'.repeat(rating) + '☆'.repeat(5 - rating);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading reviews...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"reviews-management\">\r\n      <div className=\"page-header\">\r\n        <h2>Student Reviews</h2>\r\n        <p>View and manage reviews from students and parents</p>\r\n      </div>\r\n\r\n      {/* Reviews Summary */}\r\n      <div className=\"reviews-summary\">\r\n        <div className=\"summary-card\">\r\n          <h3>Average Rating</h3>\r\n          <div className=\"rating-display\">\r\n            <span className=\"average-rating\">\r\n              {reviews.length > 0 \r\n                ? (reviews.reduce((acc, review) => acc + review.rating, 0) / reviews.length).toFixed(1)\r\n                : '0.0'\r\n              }\r\n            </span>\r\n            <div className=\"stars\">\r\n              {reviews.length > 0 \r\n                ? getRatingStars(Math.round(reviews.reduce((acc, review) => acc + review.rating, 0) / reviews.length))\r\n                : '☆☆☆☆☆'\r\n              }\r\n            </div>\r\n            <span className=\"review-count\">({reviews.length} reviews)</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"summary-card\">\r\n          <h3>Rating Distribution</h3>\r\n          <div className=\"rating-bars\">\r\n            {[5, 4, 3, 2, 1].map(stars => {\r\n              const count = reviews.filter(review => review.rating === stars).length;\r\n              const percentage = reviews.length > 0 ? (count / reviews.length) * 100 : 0;\r\n              \r\n              return (\r\n                <div key={stars} className=\"rating-bar\">\r\n                  <span className=\"stars\">{'⭐'.repeat(stars)}</span>\r\n                  <div className=\"bar-container\">\r\n                    <div \r\n                      className=\"bar-fill\"\r\n                      style={{ width: `${percentage}%` }}\r\n                    ></div>\r\n                  </div>\r\n                  <span className=\"count\">({count})</span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reviews List */}\r\n      <div className=\"reviews-list\">\r\n        <h3>All Reviews</h3>\r\n        \r\n        {reviews.length === 0 ? (\r\n          <div className=\"empty-state\">\r\n            <p>No reviews received yet</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"reviews-grid\">\r\n            {reviews.map(review => (\r\n              <div key={review._id} className=\"review-card\">\r\n                <div className=\"review-header\">\r\n                  <div className=\"reviewer-info\">\r\n                    <div className=\"reviewer-avatar\">\r\n                      {review.user?.name?.charAt(0).toUpperCase() || 'U'}\r\n                    </div>\r\n                    <div>\r\n                      <strong>{review.user?.name || 'Anonymous'}</strong>\r\n                      <div className=\"review-rating\">\r\n                        {getRatingStars(review.rating)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <span className=\"review-date\">\r\n                    {new Date(review.createdAt).toLocaleDateString()}\r\n                  </span>\r\n                </div>\r\n                \r\n                <p className=\"review-text\">{review.reviewText}</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reviews;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}